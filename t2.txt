============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /home/dflory/dev_env/rag_local/venv/bin/python
cachedir: .pytest_cache
rootdir: /home/dflory/dev_env
configfile: pyproject.toml
plugins: anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 2 items

tests/test_ioc_baseline.py::test_router_escalation_flow FAILED
tests/test_ioc_baseline.py::test_vram_guard_trigger PASSED

=================================== FAILURES ===================================
_________________________ test_router_escalation_flow __________________________
tests/test_ioc_baseline.py:13: in test_router_escalation_flow
    with patch("app.router.l1_engine.ask_local_llm", new_callable=AsyncMock) as mock_l1:
/usr/lib/python3.12/unittest/mock.py:1442: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.12/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'app.router' has no attribute 'l1_engine'
=========================== short test summary info ============================
FAILED tests/test_ioc_baseline.py::test_router_escalation_flow - AttributeError: module 'app.router' has no attribute 'l1_engine'
========================= 1 failed, 1 passed in 1.64s ==========================
